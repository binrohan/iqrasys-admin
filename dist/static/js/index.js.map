{"version":3,"file":"static/js/index.js","mappings":"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","sources":["webpack://boilerplate/webpack/bootstrap","webpack://boilerplate/webpack/runtime/global","webpack://boilerplate/webpack/runtime/publicPath","webpack://boilerplate/./src/images/user.svg","webpack://boilerplate/./src/services/auth-service.ts","webpack://boilerplate/./src/ts/auth.ts","webpack://boilerplate/./src/ts/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../../\";","export default __webpack_public_path__ + \"static/images/user.svg\";","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar BASE_URL = \"http://localhost:5000\";\r\nvar COMMON_HEADERS = {\r\n    'Access-Control-Allow-Origin': \"*\",\r\n    \"Content-Type\": \"application/json\"\r\n};\r\nvar storeUser = function (user, token) {\r\n    localStorage.setItem('USERV1.0', JSON.stringify(user));\r\n    localStorage.setItem('TOKENV1.0', token);\r\n};\r\nexport var isLoggedIn = function () { return __awaiter(void 0, void 0, void 0, function () {\r\n    var tokenJSON, token;\r\n    return __generator(this, function (_a) {\r\n        tokenJSON = localStorage.getItem('TOKENV1.0');\r\n        if (!tokenJSON) {\r\n            localStorage.removeItem('USERV1.0');\r\n            throw new Error(\"User not authenticated\");\r\n        }\r\n        token = JSON.parse(tokenJSON);\r\n        return [2 /*return*/, tokenExpirationCheck(token)];\r\n    });\r\n}); };\r\nexport var login = function (payload) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var res, data;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, fetch(\"\".concat(BASE_URL, \"/api/auth/login\"), {\r\n                    method: 'POST',\r\n                    headers: __assign({}, COMMON_HEADERS),\r\n                    body: JSON.stringify(payload)\r\n                })];\r\n            case 1:\r\n                res = _a.sent();\r\n                if (res.status > 299 || res.status < 200) {\r\n                    throw new Error(res.statusText);\r\n                }\r\n                return [4 /*yield*/, res.json()];\r\n            case 2:\r\n                data = _a.sent();\r\n                storeUser(data, res.headers.get('X-Authorization-Token'));\r\n                return [2 /*return*/, data];\r\n        }\r\n    });\r\n}); };\r\nvar tokenExpirationCheck = function (token) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var res, data;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, fetch(\"\".concat(BASE_URL, \"/api/check\"), {\r\n                    method: 'POST',\r\n                    headers: __assign(__assign({}, COMMON_HEADERS), { Authorization: token })\r\n                })];\r\n            case 1:\r\n                res = _a.sent();\r\n                if (res.status === 401)\r\n                    throw new Error(\"User authentication sesson over.\");\r\n                if (res.status !== 200)\r\n                    throw new Error(res.statusText);\r\n                return [4 /*yield*/, res.json()];\r\n            case 2:\r\n                data = _a.sent();\r\n                return [2 /*return*/, data];\r\n        }\r\n    });\r\n}); };\r\n","import { isLoggedIn } from \"../services/auth-service\";\r\nexport var isAuthenticated = function () {\r\n    isLoggedIn().then(function (data) {\r\n        console.log(data);\r\n    }, function (err) {\r\n        alert(err);\r\n        window.location.replace('/login.html');\r\n    });\r\n};\r\n","import '../css/index.css';\r\nimport user from '../images/user.svg';\r\nimport { isAuthenticated } from './auth';\r\nisAuthenticated();\r\nvar userIcon = document.querySelector('img#user-icon');\r\nuserIcon.src = user;\r\n"],"names":["__webpack_require__","g","globalThis","this","Function","e","window","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","Error","replace","p","__assign","Object","assign","t","s","i","n","arguments","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","f","y","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","COMMON_HEADERS","tokenExpirationCheck","token","res","_a","fetch","concat","method","headers","Authorization","status","statusText","json","tokenJSON","localStorage","getItem","removeItem","JSON","parse","data","console","log","err","alert","querySelector","user"],"sourceRoot":""}